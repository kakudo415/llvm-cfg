# Active Context: LLVM IR to CFG Visualizer

## 現在の開発フォーカス

現在、プロジェクトは初期段階にあり、以下の点に焦点を当てています：

1. **プロジェクト構造の確立**
   - Next.jsプロジェクトの初期化
   - TypeScriptの設定
   - ディレクトリ構造の整備

2. **コアコンポーネントの実装**
   - LLVM IRパーサーの基本機能
   - CFG生成ロジックの基本機能
   - UIの基本レイアウト

3. **デプロイパイプラインの構築**
   - GitHub Actionsワークフローの設定
   - GitHub Pagesへのデプロイ設定

## 現在の課題と決定事項

### 解決済みの課題

1. **技術スタックの選定**
   - Next.js + TypeScriptをフレームワークとして採用
   - D3.js + dagre-d3をグラフ描画ライブラリとして選定
   - Prism.jsをシンタックスハイライトに使用
   - Tailwind CSSをスタイリングに採用

2. **アーキテクチャの決定**
   - クライアントサイドのみの処理に限定
   - モジュール化された設計アプローチ
   - 責務の明確な分離

### 進行中の課題

1. **LLVM IR解析の範囲**
   - どの程度のLLVM IR構文をサポートするか
   - エラー処理の方針
   - パフォーマンス最適化の戦略

2. **UIデザインの詳細**
   - レスポンシブデザインの実装方法
   - ダークモード対応の是非
   - アクセシビリティへの対応

3. **テスト戦略**
   - ユニットテストの範囲
   - E2Eテストの必要性
   - テストデータの準備

## 次のステップ

短期的な次のステップは以下の通りです：

1. **プロジェクトの初期化**
   - Next.jsプロジェクトのセットアップ
   - 必要なライブラリのインストール
   - 基本的な設定ファイルの作成

2. **基本的なUIレイアウトの実装**
   - 画面分割（左：IRエディタ、右：CFGビューア）
   - レスポンシブデザインの基盤
   - 基本的なスタイリング

3. **LLVM IRパーサーの基本実装**
   - 基本ブロックの識別
   - 制御フロー命令の解析
   - 簡単なエラー処理

4. **CFG生成の基本実装**
   - ノードとエッジの生成
   - 基本的なグラフレイアウト
   - D3.js + dagre-d3の統合

5. **GitHub Actionsワークフローの設定**
   - ビルドプロセスの自動化
   - GitHub Pagesへのデプロイ設定

## 中長期的な計画

中長期的には以下の機能拡張を予定しています：

1. **高度なLLVM IR解析**
   - より複雑な命令のサポート
   - 関数間の関係の解析
   - 最適化パスの視覚化

2. **UIの拡張**
   - 詳細情報の表示パネル
   - 設定オプション
   - ダークモード対応

3. **パフォーマンス最適化**
   - 大規模IRコードの効率的な処理
   - レンダリングの最適化
   - メモリ使用量の削減

4. **エクスポート機能**
   - グラフの画像/SVG出力
   - 解析結果のJSON出力

5. **ユーザーフィードバックに基づく改善**
   - 初期バージョンのフィードバック収集
   - ユーザビリティの向上
   - 追加機能のリクエスト対応

## 現在の意思決定プロセス

プロジェクトの初期段階では、以下の原則に基づいて意思決定を行います：

1. **シンプルさを優先**: 最初は最小限の機能セットに集中し、後から拡張する
2. **ユーザー体験を重視**: 技術的に優れていても使いにくければ価値が低い
3. **段階的な開発**: 一度に全機能を実装するのではなく、段階的に機能を追加
4. **フィードバックループ**: 早い段階でフィードバックを得て、それに基づいて調整
5. **技術的負債の最小化**: 将来の拡張を考慮した設計を心がける

## 現在のリスクと対策

1. **技術的リスク**
   - LLVM IRの複雑さによる解析の難しさ
   - 対策: まずは基本的な構文のみをサポートし、段階的に拡張

2. **スケジュールリスク**
   - 予想以上に実装に時間がかかる可能性
   - 対策: MVPを明確に定義し、優先順位付けを徹底

3. **ユーザビリティリスク**
   - 専門的な内容のため、UIが複雑になりすぎる可能性
   - 対策: シンプルなUIから始め、ユーザーフィードバックに基づいて改善

4. **パフォーマンスリスク**
   - 大規模なIRコードの処理に時間がかかる可能性
   - 対策: パフォーマンスを考慮した設計と、必要に応じた最適化
