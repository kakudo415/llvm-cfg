# Tech Context: LLVM IR to CFG Visualizer

## 技術スタック概要

このプロジェクトでは、以下の技術スタックを採用しています：

| カテゴリ | 技術 | バージョン |
|---------|------|-----------|
| フレームワーク | Next.js | 14.x |
| 言語 | TypeScript | 5.x |
| グラフ描画 | D3.js | 7.x |
| グラフレイアウト | dagre-d3 | 0.6.x |
| シンタックスハイライト | Prism.js | 1.29.x |
| スタイリング | Tailwind CSS | 3.x |
| ビルド/デプロイ | GitHub Actions | - |
| ホスティング | GitHub Pages | - |

## 技術選定の理由

### Next.js

Next.jsを選定した理由：

1. **静的サイト生成（SSG）**: GitHub Pagesへのデプロイに最適な静的サイト生成をサポート
2. **React基盤**: コンポーネントベースの開発が可能で、UIの構築が容易
3. **TypeScriptサポート**: 型安全な開発環境を標準でサポート
4. **最適化**: 画像最適化やコード分割などのパフォーマンス最適化機能を提供
5. **エコシステム**: 豊富なプラグインとコミュニティサポート

### TypeScript

TypeScriptを選定した理由：

1. **型安全性**: コンパイル時の型チェックによるエラー検出
2. **開発効率**: コード補完やリファクタリングのサポートによる開発効率の向上
3. **保守性**: 自己文書化コードによる保守性の向上
4. **スケーラビリティ**: 大規模アプリケーション開発に適した言語機能

### D3.js + dagre-d3

グラフ描画にD3.jsとdagre-d3を選定した理由：

1. **表現力**: 高度にカスタマイズ可能なグラフ描画機能
2. **レイアウト**: 有向グラフに最適化された自動レイアウトアルゴリズム
3. **インタラクティブ性**: ズーム、パン、ドラッグなどのインタラクション機能
4. **SVGベース**: 高品質でスケーラブルなグラフィックス
5. **コミュニティ**: 広く使用されており、豊富な事例とリソースが利用可能

### Prism.js

シンタックスハイライトにPrism.jsを選定した理由：

1. **軽量**: 最小限のオーバーヘッドで高速に動作
2. **拡張性**: カスタム言語定義の追加が容易
3. **テーマ**: 多様なテーマオプションを提供
4. **プラグイン**: 行番号表示などの追加機能をサポート
5. **広い採用**: 多くのプロジェクトで使用されている実績

### Tailwind CSS

スタイリングにTailwind CSSを選定した理由：

1. **ユーティリティファースト**: 迅速なUI開発が可能
2. **カスタマイズ性**: プロジェクト固有のデザインシステムに適応可能
3. **パフォーマンス**: 未使用CSSの削除による最適化
4. **レスポンシブデザイン**: モバイルファーストのアプローチをサポート
5. **開発効率**: クラス名の考案やCSSファイルの管理が不要

### GitHub Actions & GitHub Pages

デプロイとホスティングにGitHub ActionsとGitHub Pagesを選定した理由：

1. **統合**: GitHubリポジトリとの緊密な統合
2. **自動化**: プッシュやプルリクエストに基づく自動ビルドとデプロイ
3. **無料**: 小規模プロジェクトに適した無料プラン
4. **設定の容易さ**: 最小限の設定でCI/CDパイプラインを構築可能
5. **信頼性**: Microsoftによる安定したインフラストラクチャ

## 開発環境

推奨される開発環境：

1. **エディタ**: Visual Studio Code
   - TypeScript、React、Tailwind CSSの拡張機能を活用
2. **Node.js**: v18.x以上
3. **パッケージマネージャ**: npm または yarn
4. **ブラウザ**: Chrome/Firefox（開発者ツール使用）
5. **Git**: バージョン管理

## 依存関係管理

主要な依存関係：

```json
{
  "dependencies": {
    "next": "^14.0.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "d3": "^7.8.5",
    "dagre-d3": "^0.6.4",
    "prismjs": "^1.29.0"
  },
  "devDependencies": {
    "typescript": "^5.2.2",
    "tailwindcss": "^3.3.3",
    "postcss": "^8.4.31",
    "autoprefixer": "^10.4.16",
    "@types/react": "^18.2.21",
    "@types/d3": "^7.4.0",
    "@types/prismjs": "^1.26.0",
    "eslint": "^8.49.0",
    "eslint-config-next": "^14.0.0"
  }
}
```

## 技術的な制約

1. **ブラウザ互換性**:
   - モダンブラウザ（Chrome、Firefox、Safari、Edge最新版）をサポート
   - IE11は非サポート

2. **パフォーマンス目標**:
   - 初期ロード時間: 2秒以内
   - IRコード解析: 100KB未満のコードで500ms以内
   - メモリ使用量: 通常使用で100MB未満

3. **アクセシビリティ**:
   - WCAG 2.1 AA準拠を目指す
   - キーボードナビゲーションのサポート

4. **セキュリティ**:
   - クライアントサイドのみの処理のため、データ漏洩リスクは最小限
   - サードパーティライブラリの脆弱性スキャンを実施

## 将来的な技術拡張の可能性

1. **WebAssembly統合**:
   - より高速なIR解析のためにLLVMツールをWebAssemblyにコンパイル

2. **オフライン対応**:
   - Service Workerを使用したPWA（Progressive Web App）化

3. **協調編集**:
   - WebSocketやCRDTを使用したリアルタイム協調編集機能

4. **エクスポート機能**:
   - SVG、PNG、PDFなど様々な形式でのグラフエクスポート

5. **テーマ対応**:
   - ダークモード/ライトモードの切り替え
   - カスタムテーマの作成と適用
